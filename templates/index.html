<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Auto Buyer Tool</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <h2>üõí Auto Buyer Tool</h2>

  <form id="accountForm" onsubmit="return false;">
    <table>
      <thead>
        <tr>
          <th>Ch·∫°y</th>
          <th>Username</th>
          <th>Password</th>
          <th>Proxy (SOCKS5)</th>
          <th>T√†i kho·∫£n m·ªõi</th>
          <th>Card Number</th>
          <th>Exp M</th>
          <th>Exp Y</th>
          <th>CVV</th>
          <th>Link s·∫£n ph·∫©m</th>
          <th>S·ªë l∆∞·ª£ng</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody id="accountTableBody"></tbody>
    </table>

    <div class="buttons">
      <button type="button" onclick="addRow()">‚ûï Th√™m d√≤ng</button>
      <button type="button" onclick="saveAccounts()">üíæ L∆∞u t·∫•t c·∫£</button>
      <button type="button" onclick="startWorkflow()">‚ñ∂Ô∏è Start Workflow</button>
    </div>
  </form>

  <!-- Khung hi·ªÉn th·ªã log -->
  <pre id="logArea" style="background:#111;color:#0f0;padding:10px;height:300px;overflow-y:auto;border-radius:5px;margin-top:10px;"></pre>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
  <script>
    // --- Auto c·∫≠p nh·∫≠t log ---
    async function refreshLogs() {
      try {
        const res = await fetch("/logs");
        const data = await res.json();
        const logArea = document.getElementById("logArea");
        logArea.textContent = data.logs || "‚ö†Ô∏è Ch∆∞a c√≥ log n√†o!";
        logArea.scrollTop = logArea.scrollHeight;
      } catch (err) {
        console.error("L·ªói khi t·∫£i log:", err);
      }
    }

    // T·ª± ƒë·ªông c·∫≠p nh·∫≠t log m·ªói 2 gi√¢y
    setInterval(refreshLogs, 2000);
  </script>
  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
